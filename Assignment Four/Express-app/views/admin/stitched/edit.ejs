<form action="" method="post" enctype="multipart/form-data">
  <div class="mb-3">
    <% if (stitched.image) { %>
    <!-- Display the current image -->
    <img
      id="currentImage"
      src="data:<%= stitched.image.contentType %>;base64,<%= stitched.image.data.toString('base64') %>"
      alt="<%= stitched.details %>"
    />
    <% } %>

    <div class="mb-3">
      <label for="image" class="form-label">Change Image</label>
      <input
        type="file"
        class="form-control"
        id="image"
        name="image"
        accept="image/*"
        onchange="previewImage(this)"
      />
    </div>
    <label for="color" class="form-label">Color</label>
    <input
      type="text"
      class="form-control"
      id="color"
      name="color"
      value="<%= stitched.color %>"
    />
  </div>
  <div class="mb-3">
    <label for="price" class="form-label">Price</label>
    <input
      type="number"
      class="form-control"
      id="price"
      name="price"
      value="<%= stitched.price %>"
    />
  </div>
  <div class="mb-3">
    <label for="details" class="form-label">details</label>
    <input
      type="text"
      class="form-control"
      id="details"
      name="details"
      value="<%= stitched.details %>"
    />
  </div>
  <div class="mb-3">
    <label for="size" class="form-label">Size</label>
    <input
      type="text"
      class="form-control"
      id="size"
      name="size"
      value="<%= stitched.size %>"
    />
  </div>
  <button class="btn btn-warning" type="submit">Edit Dress</button>
</form>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
  function previewImage(input) {
    const fileInput = input;
    const currentImage = document.getElementById("currentImage");

    if (fileInput.files && fileInput.files[0]) {
      const reader = new FileReader();

      reader.onload = function (e) {
        currentImage.src = e.target.result;
      };

      reader.readAsDataURL(fileInput.files[0]);
    }
  }
</script>
